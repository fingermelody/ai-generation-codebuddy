# 用户自定义规则 user-rules.md (User Rules)

## 基础规则

### 1. 语言要求

- **Always respond in 中文**
- 所有回复、文档、代码注释都使用简体中文
- 技术术语可保留英文，但需要中文解释

### 2. 变更记录管理 ⭐ 重要

- **每次修改后必须更新 devlog.md**
- **严禁删除历史记录** - 只能追加，不能覆盖
- **使用 `replace_in_file` 在文件顶部添加新记录**
- **采用时间倒序方式存储** (最新记录在顶部)
- **时间格式**: [YYYY-MM-DD HH:MM]
- **记录内容包括**: 修改文件、具体变更、影响范围

### 3. 系统环境

- **操作系统**: macOS
- **工作目录**: /Users/kongdeyuan/Desktop/awesome-repos/travel
- **默认 Shell**: Zsh

### 4. 文件操作规范

- **优先使用 `replace_in_file`** 进行文件修改
- **只有在创建新文件时才使用 `write_to_file`**
- **大文件修改时分批处理**，避免单次操作过大
- **修改前先用 `read_file` 确认当前内容**

### 5. 代码规范

- **组件命名**: PascalCase (如: TripCard)
- **文件命名**: kebab-case (如: trip-card.tsx)
- **变量函数**: camelCase (如: getUserData)
- **常量**: UPPER_SNAKE_CASE (如: API_BASE_URL)
- **TypeScript 优先**，所有新代码必须有类型定义

### 6. Git 提交规范

- **提交格式**: `type(scope): description`
- **类型**: feat, fix, docs, style, refactor, test, chore
- **示例**: `feat(auth): 添加用户登录功能`

## devlog 更新模板

每次修改后，必须在 devlog.md 顶部添加以下格式的记录：

```markdown
## [2024-MM-DD HH:MM] - 变更标题

### 修改内容
- **文件名**: 具体修改内容
- **文件名**: 具体修改内容

### 技术改进
- 改进点1
- 改进点2

### 文件变更
- `path/to/file`: 变更类型 (新增/修改/删除)

### 影响范围
- 影响的功能模块
- 影响的用户群体

---
```

## 操作检查清单

### 文件修改前

- [ ] 使用 `read_file` 查看当前内容
- [ ] 确定使用 `replace_in_file` 还是 `write_to_file`
- [ ] 准备 devlog 更新内容

### 文件修改后

- [ ] 验证修改是否正确
- [ ] 更新 devlog.md (使用 `replace_in_file`)
- [ ] 确认历史记录未被删除
- [ ] 检查时间格式是否正确

## 错误预防

### 常见错误及预防

1. **覆盖 devlog** → 永远使用 `replace_in_file`
2. **删除历史记录** → 只在文件顶部添加新内容
3. **时间格式错误** → 使用 [YYYY-MM-DD HH:MM] 格式
4. **工具使用错误** → 一个响应中只能使用一次文件操作工具

### 紧急情况处理

- 如果意外覆盖了文件，立即说明情况
- 提供恢复方案或重新创建内容
- 在下次操作中加强检查

## 质量标准

### 代码质量

- 所有代码必须有 TypeScript 类型
- 组件必须有 Props 接口定义
- 函数必须有返回类型声明
- 复杂逻辑必须有中文注释

### 文档质量

- 所有文档使用中文编写
- 技术术语提供中英文对照
- 示例代码包含详细注释
- 变更记录详细且准确

### 响应质量

- 回复简洁明了，避免冗余
- 技术解释通俗易懂
- 提供具体的操作步骤
- 包含必要的代码示例

---

*规则版本: v1.0*
*创建时间: 2026-01-11*
*适用范围: we3D 项目开发*
